# Wazuh Honeypot on Azure Cloud: An End-to-End Guide

## Description

This guide details how to set up a honeypot using Wazuh as the agent within the Azure cloud environment. A honeypot is a decoy system designed to attract and monitor malicious activity, providing valuable insights into potential threats and attacker tactics. Wazuh, a free and open-source security monitoring solution, acts as the agent, providing intrusion detection, log analysis, and security event management capabilities.

## Learning Objectives

-   Deploying a Wazuh agent on an Azure Virtual Machine (VM).
-   Configuring the Wazuh agent to monitor for suspicious activity.
-   Setting up a basic honeypot environment to attract attackers.
-   Analyzing logs and events generated by Wazuh to identify potential threats.
-   Leveraging Wazuh's capabilities for intrusion detection and security monitoring.

## Technologies + Requirements

-   Microsoft Azure Account
-   Azure Virtual Machine
-   Wazuh Agent
-   Basic understanding of Linux command line
-   Basic networking knowledge

## Overview

1.  Create an Azure Account
2.  Deploy a Vulnerable Virtual Machine
3.  Install and Configure the Wazuh Agent
4.  Configure Honeypot Services
5.  Analyze Wazuh Logs and Events

## Step 1: Create a Microsoft Azure Account

Microsoft offers a free Azure account with limited credits.

1.  Go to the Azure website.
2.  Sign up for a new account.
3.  Follow the instructions to verify your account.

## Step 2: Deploy a Vulnerable Virtual Machine

1.  In the Azure portal, search for "Virtual Machines".
2.  Click "Create" -> "Azure virtual machine".

### Basics

-   **Resource Group:** Create a new resource group (e.g., `wazuh-honeypot-rg`).
-   **Virtual machine name:** Give your VM a name (e.g., `wazuh-honeypot-vm`).
-   **Region:** Choose a region.
-   **Image:** Select a vulnerable OS image, such as an older version of Ubuntu Server or CentOS.
-   **Size:** Choose an appropriate VM size.

### Administrator account

-   Set up a username and password for the virtual machine.

### Inbound port rules

-   Allow SSH (22) and any other ports you want to expose for your honeypot services. Consider other ports like RDP (3389), HTTP (80), etc., to simulate a real environment.

### Disks

-   Leave everything as is

### Networking

-   Create a new Network Security Group (NSG) to control inbound and outbound traffic.  Start with restrictive rules and open up ports as needed for your honeypot services.

### Review + Create

-   Review your settings and create the VM.

## Step 3: Install and Configure the Wazuh Agent

1.  Connect to your Azure VM via SSH.
2.  Download and install the Wazuh agent. Replace `<wazuh_server_ip>` with the IP address of your Wazuh server. If you don't have a Wazuh server, you can deploy one in Azure as well.

